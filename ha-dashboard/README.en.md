[![de](https://img.shields.io/badge/lang-de-red.svg)](README.md)
[![en](https://img.shields.io/badge/lang-en-blue.svg)](README.en.md)

# Solaris RPS3/4 Dashboard for Home Assistant

This dashboard provides a visual representation of a ROTEX Solaris RPS3/4 system in Home Assistant using [ha-floorplan](https://github.com/ExperienceLovelace/ha-floorplan).

The dashboard consists of:

- `solaris-rps-dashboard.yaml` – `ha-floorplan` configuration (entities, actions, styles).
- `solaris-rps-dashboard.css` – CSS for styling the SVG and states.
- `solaris-rps-dashboard.svg` – SVG dashboard image.
- `convert-svg.py` – helper script to convert a draw.io SVG into a ha-floorplan compatible SVG.

> [!NOTE]
> The SVG in this repository is **already converted** and can be used directly.

### Prerequisites

- Home Assistant running with file access to `/config`.
- Installed [HACS](https://www.hacs.xyz).
- Installed [ha-floorplan](https://github.com/ExperienceLovelace/ha-floorplan) (preferebly via HACS). Read the [Adding ha-floorplan to Home Assistant](https://experiencelovelace.github.io/ha-floorplan/docs/quick-start/#adding-ha-floorplan-to-home-assistant) for insalling `ha-floorplan`.
- Optional for SVG conversion (if you want to change the already existing SVG file): Python 3.x to run `convert-svg.py` (tested with Python 3.12).

### Copy the files into your Home Assistant configuration:

- Create a folder under `/config/www` where you can upload the `solaris-rps-dashboard` files. For example, `floorplans/solaris-rps`.
- Upload the `ha-dashboard/solaris-rps-dashboard.css` and `ha-dashboard/solaris-rps-dashboard.svg` into the created folder `/config/www/floorplans/solaris-rps`

### Adapting the YAML configuration

You can adapt the content of `ha-dashboard/solaris-rps-dashboard.yaml` to suit your needs, e.g. change the text labels and/or adjust the dashboard for Solaris RPS3/4 type.

### Configuring the `ha-floorplan` card

You can create the dashboard in two ways:

- In a new `View`: 

  In `View configuration` -> `Edit in YAML` and paste the content of the `ha-dashboard/solaris-rps-dashboard.yaml` in there.

- In a existing `View`:

  In your existing `View` click `Add card` -> `Manual` and paste the content of `ha-dashboard/solaris-rps-dashboard.yaml` from `type: custom:floorplan-card` below.
  
> [!TIP]
> Optionally you can remove the `full_height: true` if you do not want fullscreen view.

### Optional SVG conversion

If you change the existing `draw.io` diagram dashboard, you can use the `convert-svg.py` script to replace the `foreignObject` tags generated by `draw.io` with native SVG text elements, so it can work with `ha-floorplan`. Additionally, you need the `svgdata` [plugin for `draw.io`](https://www.drawio.com/doc/faq/plugins) installed to save the IDs into the exported SVG.

```shell
usage: convert-svg.py [-h] [-o OUTPUT] [input]

draw.io → ha-floorplan SVG converter

positional arguments:
  input                 Input SVG

options:
  -h, --help            show this help message and exit
  -o OUTPUT, --output OUTPUT
                        Output SVG (optional)
```